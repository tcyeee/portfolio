---
import Layout from '../layouts/Layout.astro';
import { projects } from '../config/projects';
import ProjectCard from '../components/ProjectCard';

const categories = ['all', 'web-extension', 'obsidian-plugin', 'web-app', 'blockchain', 'other'] as const;
const categoryLabels: Record<string, string> = {
  all: '全部',
  'web-extension': '网页插件',
  'obsidian-plugin': 'Obsidian插件',
  'web-app': 'Web应用',
  'blockchain': '区块链应用',
  'other': '其他',
};

const selectedCategory = Astro.url.searchParams.get('category') || 'all';
const filteredProjects = selectedCategory === 'all' 
  ? projects 
  : projects.filter(p => p.category === selectedCategory);
---

<Layout title="作品集">
  <div class="container mx-auto px-4 py-16">
    <h1 class="text-4xl font-bold mb-8 text-center text-gray-900 dark:text-white">
      我的作品
    </h1>
    
    <!-- Category Filter -->
    <div class="flex flex-wrap gap-3 justify-center mb-12">
      {categories.map((category) => (
        <a
          href={`/projects?category=${category}`}
          class={`px-4 py-2 rounded-lg transition-colors ${
            selectedCategory === category
              ? 'bg-primary-600 text-white'
              : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
          }`}
        >
          {categoryLabels[category]}
        </a>
      ))}
    </div>

    <!-- Projects Grid -->
    {filteredProjects.length > 0 ? (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredProjects.map((project) => (
          <ProjectCard client:load project={project} />
        ))}
      </div>
    ) : (
      <div class="text-center py-12">
        <p class="text-gray-500 dark:text-gray-400 text-lg">
          该分类下暂无作品
        </p>
      </div>
    )}
  </div>
</Layout>

