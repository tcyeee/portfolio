---
import { apps } from '../config/projects';

interface Props {
  apps: typeof apps;
}

const { apps: appList } = Astro.props;
---

<section class="mb-20">
  <h2 class="text-3xl font-bold mb-8 text-center text-gray-900 dark:text-white">
    APP列表
  </h2>
  <div class="flex flex-wrap justify-center gap-6 md:gap-8">
    {appList.map((app) => {
      const isApp = app.type === 'app';
      const isMiniprogram = app.type === 'miniprogram';
      const isPlugin = app.type === 'plugin';
      
      // 应用图标：方圆形
      const appClasses = 'w-20 h-20 md:w-24 md:h-24 rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-110';
      
      // 小程序图标：圆形
      const miniprogramClasses = 'w-20 h-20 md:w-24 md:h-24 rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-110';
      
      // 插件图标：外部带有虚线的方圆形
      const pluginClasses = 'w-20 h-20 md:w-24 md:h-24 rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-110 border-2 border-dashed border-gray-300 dark:border-gray-600 p-1';
      
      const iconClasses = isApp 
        ? appClasses 
        : isMiniprogram 
        ? miniprogramClasses 
        : pluginClasses;
      
      const iconWrapperClasses = isPlugin 
        ? 'relative' 
        : '';
      
      return (
        <div class="flex flex-col items-center group">
          <a
            href={app.url || '#'}
            target={app.url ? '_blank' : undefined}
            rel={app.url ? 'noopener noreferrer' : undefined}
            class={iconWrapperClasses}
            title={app.description || app.name}
          >
            {isPlugin ? (
              <div class={pluginClasses}>
                <img
                  src={app.icon}
                  alt={app.name}
                  class="w-full h-full rounded-lg object-cover"
                />
              </div>
            ) : (
              <img
                src={app.icon}
                alt={app.name}
                class={iconClasses}
              />
            )}
          </a>
          <span class="mt-3 text-sm text-gray-700 dark:text-gray-300 text-center max-w-[80px] md:max-w-[96px] truncate group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
            {app.name}
          </span>
        </div>
      );
    })}
  </div>
</section>

<style>
  /* 插件图标的虚线边框动画效果 */
  .group:hover .border-dashed {
    border-color: rgb(14 165 233);
    animation: pulse-dash 1.5s ease-in-out infinite;
  }
  
  @keyframes pulse-dash {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.6;
    }
  }
</style>

